<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>文章详情 | 云秒搭AI周报</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1><a href="index.html">云秒搭AI周报</a></h1>
    </div>
  </header>

  <main class="container">
    <article class="article-detail">
      <header class="article-header">
        <h1 id="articleTitle">加载中...</h1>
        <div class="article-meta">
          <span id="articleSource">来源</span>
          <span id="articleDate">日期</span>
        </div>
        <div id="articleTags"></div>
      </header>
      
      <div id="articleBody" class="article-body">
        <p>正在加载文章内容...</p>
      </div>
      
      <div class="article-actions">
        <a href="index.html">← 返回首页</a>
        <a id="originalLink" href="#" target="_blank">查看原文</a>
      </div>
    </article>
  </main>

  <script>
    // 立即执行
    (function() {
      console.log('开始加载文章...');
      
      // 获取文章ID
      const urlParams = new URLSearchParams(window.location.search);
      const articleId = urlParams.get('id');
      console.log('文章ID:', articleId);
      
      if (!articleId) {
        document.getElementById('articleBody').innerHTML = '<p>未找到文章ID</p>';
        return;
      }
      
      // 获取文章数据
      fetch('posts/articles.json')
        .then(response => response.json())
        .then(articles => {
          console.log('获取到文章数量:', articles.length);
          
          const article = articles.find(a => a.id === articleId);
          console.log('找到文章:', article ? article.title : '未找到');
          
          if (article) {
            // 更新页面内容
            document.title = article.title + ' | 云秒搭AI周报';
            document.getElementById('articleTitle').textContent = article.title;
            document.getElementById('articleSource').textContent = article.source;
            document.getElementById('articleDate').textContent = article.date;
            document.getElementById('articleBody').innerHTML = article.content;
            document.getElementById('originalLink').href = article.url;
            
            // 更新标签
            const tagsHtml = article.tags.map(tag => `<span class="article-tag">${tag}</span>`).join('');
            document.getElementById('articleTags').innerHTML = tagsHtml;
            
            console.log('文章加载完成');
          } else {
            document.getElementById('articleBody').innerHTML = '<p>未找到指定文章</p>';
          }
        })
        .catch(error => {
          console.error('加载失败:', error);
          document.getElementById('articleBody').innerHTML = '<p>加载失败: ' + error.message + '</p>';
        });
    })();
  </script>
</body>
</html>