# 微信公众号文章爬虫使用说明

## 功能介绍

这个爬虫脚本可以帮您：
- 抓取微信公众号文章的内容
- 自动重新排版和格式化
- 直接更新到您的网站文章中
- 处理图片、链接等多媒体内容

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 基本使用

```bash
python3 crawler.py
```

然后按提示输入微信公众号文章链接，例如：
```
https://mp.weixin.qq.com/s/aIltul1-Pb8Oz7hrfWC8dA
```

### 2. 脚本会自动完成以下操作：

1. **抓取文章内容** - 从微信公众号获取文章
2. **解析和清理** - 提取标题、正文、图片等
3. **重新排版** - 格式化为适合网站的HTML
4. **生成摘要** - 自动提取文章摘要
5. **提取标签** - 根据内容生成相关标签
6. **更新网站** - 自动更新 `posts/articles.json` 文件

### 3. 处理特殊情况

- **需要验证的文章**: 如果遇到"环境异常"提示，脚本会生成模拟内容
- **网络问题**: 自动重试和错误处理
- **内容解析失败**: 提供备用方案

## 输出示例

```
🚀 微信公众号文章爬虫启动
==================================================
请输入微信公众号文章链接: https://mp.weixin.qq.com/s/aIltul1-Pb8Oz7hrfWC8dA

正在抓取文章: https://mp.weixin.qq.com/s/aIltul1-Pb8Oz7hrfWC8dA
⚠️  文章需要验证，生成模拟内容...

📄 文章信息:
标题: 微信公众号文章
来源: 微信公众号
日期: 2025-01-20
标签: 微信公众号, AI技术
摘要: 这是一篇来自微信公众号的文章，由于访问限制，无法获取完整内容。请点击"阅读原文"查看完整内容。...

是否将此文章添加到网站? (y/n): y
✅ 添加了新文章: 微信公众号文章
📝 已更新 posts/articles.json

🎉 文章已成功添加到网站!
请刷新浏览器查看更新后的内容。
```

## 注意事项

1. **访问限制**: 微信公众号有反爬虫机制，可能需要验证
2. **内容版权**: 请确保您有权限使用文章内容
3. **网络环境**: 建议在稳定的网络环境下使用
4. **备份数据**: 建议定期备份 `posts/articles.json` 文件

## 故障排除

### 问题1: 无法抓取内容
**解决方案**: 脚本会自动生成模拟内容，用户仍可点击原文链接查看

### 问题2: 网络超时
**解决方案**: 检查网络连接，或稍后重试

### 问题3: JSON文件更新失败
**解决方案**: 检查文件权限，确保脚本有写入权限

## 自定义配置

您可以修改 `crawler.py` 中的以下参数：

- `User-Agent`: 浏览器标识
- `timeout`: 请求超时时间
- `tags`: 标签提取规则
- `summary_length`: 摘要长度

## 技术支持

如果遇到问题，请检查：
1. Python版本 (建议3.7+)
2. 依赖包是否正确安装
3. 网络连接是否正常
4. 文件权限是否正确
